Registry.registerRaw("page.js","5570",function(){return{inject:function(a){var m=document.createElementNS(document.lookupNamespaceURI(null)||"http://www.w3.org/1999/xhtml","script");m.textContent=a;(document.head||document.body||document.documentElement||document).appendChild(m);m.parentNode.removeChild(m)},backup:function(a,m,k,A){var c={safeWindow:{},safeDocument:{},eval:eval,Context:{D:A},exec_fn:function(a,b,I){h(new c.safeWindow.Function(a),b,I)},exec_csp:function(a,b,I){var e="__u__"+
(19831206*c.Context.M_r()+1);c.Message.send("csp",{id:e,src:a});c.exec_script(e,b,I)},exec_script:function(a,b,c){var e=window[a];delete window[a];h(e,b,c)}},h,b,x,C,n;(function(){var d=function(a){var b=function(b){return h(a,b,h(x.wrappedJSObject,arguments,[1]))};b.wrappedJSObject=a;return b},N={F_a:h=function(){var b=a.Function.apply;return function(a,c,d){a.apply===b?c=a.apply(c,d):(a[k]=b,c=a[k](c,d),delete a[k]);return c}}(),E_u:function(b,e){if(c.exec_eval){var d="__u__"+(19831206*c.Context.M_r()+
1),k=d+"_";window[k]=e;var h=c.Context.F_c(c.Context.eval,window,"(function() {"+b+'}).apply(window["'+k+'"])');delete a[d];delete a[k];return h}c.exec_csp(b,e)},E_c:function(a,b){c.exec_eval?h(new c.safeWindow.Function(a),b):c.exec_csp(a,b)},F_c:d(a.Function.call),F_b:b=d(a.Function.bind),F_tS:d(a.Function.toString),A_fE:d(a.Array.prototype.forEach),A_sl:x=d(a.Array.prototype.slice),A_sp:d(a.Array.prototype.splice),A_sh:d(a.Array.prototype.shift),A_j:d(a.Array.prototype.join),A_pu:d(a.Array.prototype.push),
A_po:d(a.Array.prototype.pop),A_m:d(a.Array.prototype.map),A_c:d(a.Array.prototype.concat),A_f:d(a.Array.prototype.filter),A_iO:d(a.Array.prototype.indexOf),O_k:a.Object.keys,O_dP:a.Object.defineProperties,O_gOPN:a.Object.getOwnPropertyNames,O_gOPD:a.Object.getOwnPropertyDescriptor,O_gOPDs:a.Object.getOwnPropertyDescriptors||function(a){var b={},c;for(c in a)b[c]=N.O_gOPD(a,c);return b},O_dG:d(a.Object.prototype.__defineGetter__),O_dS:d(a.Object.prototype.__defineSetter__),O_tS:d(a.Object.prototype.toString),
J_p:n=a.JSON.parse,J_s:C=a.JSON.stringify,c_l:a.console.log.bind(a.console),c_i:a.console.info.bind(a.console),c_w:a.console.warn.bind(a.console),c_e:a.console.error.bind(a.console),c_d:a.console.debug.bind(a.console),M_f:a.Math.floor,M_r:a.Math.random,M_m:a.Math.max,N_tS:d(a.Number.prototype.toString),P_r:a.Promise?a.Promise.resolve.bind(a.Promise):void 0,P_t:a.Promise?d(a.Promise.prototype.then):void 0,P_c:a.Promise?d(a.Promise.prototype.catch):void 0,R_rAAB:a.FileReader?d(a.FileReader.prototype.readAsArrayBuffer):
void 0,S_fCC:a.String.fromCharCode,S_m:d(a.String.prototype.match),S_su:d(a.String.prototype.substr),S_se:d(a.String.prototype.search),S_sp:d(a.String.prototype.split),S_r:d(a.String.prototype.replace),S_cCA:d(a.String.prototype.charCodeAt),S_tLC:d(a.String.prototype.toLowerCase),S_tUC:d(a.String.prototype.toUpperCase),D_pFS:d(a.DOMParser.prototype.parseFromString),X_o:d(a.XMLHttpRequest.prototype.open),X_sRH:d(a.XMLHttpRequest.prototype.setRequestHeader),X_oMT:d(a.XMLHttpRequest.prototype.overrideMimeType),
X_gARH:d(a.XMLHttpRequest.prototype.getAllResponseHeaders),X_gRH:d(a.XMLHttpRequest.prototype.getResponseHeader),X_s:d(a.XMLHttpRequest.prototype.send),X_a:d(a.XMLHttpRequest.prototype.abort),D_n:a.Date.now};Object.keys(N).forEach(function(a){c.Context[a]=N[a]});"String Array Object Number parseInt JSON Math Date Event MutationEvent console location Error Uint8Array Blob FileReader DOMParser XMLHttpRequest Function RegExp frames self top document location Promise".split(" ").forEach(function(b){c.safeWindow[b]=
a[b]});"postMessage addEventListener removeEventListener setTimeout setInterval clearTimeout clearInterval alert prompt confirm encodeURIComponent decodeURIComponent encodeURI decodeURI escape unescape atob btoa close".split(" ").forEach(function(b){var d=a[b];c.safeWindow[b]=function(){return h(d,a,arguments)}});c.createSafeDocument=function(a){"getElementById createEvent createElement dispatchEvent addEventListener removeEventListener".split(" ").forEach(function(b){var d=a[b];c.safeDocument[b]=
function(){return h(d,a,arguments)}})};c.createSafeDocument(m)})();try{c.Message=function(a,b){var c=function(){return h(b.dispatchEvent,b,arguments)},e=function(){return h(b.addEventListener,b,arguments)},k=function(){return h(b.removeEventListener,b,arguments)},m=function(a,c){var d=b.createEvent("MutationEvent");d.initMutationEvent(a,!1,!1,null,null,null,C(c),d.ADDITION);return d},y=function(a,b){var c;a&&(c=ba[a])&&(c(b),delete ba[a])},x,A,M,O,K=1,ba={},p=function(a){var b=n(a.attrName);"message.response"==
b.m?y(b.r,b.a):x&&x(b,b.r?function(a){a=m(M,{m:"message.response",a:a,r:b.r});c(a)}:function(){})};return{init:function(a){O||(O=a);M="2C_"+O;A="2P_"+O;e(A,p,!1)},send:function(a,b,d){if(d){var e=++K;ba[K]=d;d=e}else d=null;a=m(M,{m:a,a:b,r:d});c(a)},onMessage:{setListener:function(a){x=a}},cleanup:function(){p&&k(A,p,!1);p=null}}}(c.safeWindow,c.safeDocument),c.Message.init(k),c.Message.onMessage.setListener(function(a){if(c)if("load"==a.m)c.Context.pageLoaded=!0;else if("DOMContentLoaded"==a.m)c.Context.domContentLoaded=
!0;else if("cleanup"==a.m)c.Message.cleanup(),c=null;else if("next"==a.m)if(a.a.id)c.exec_script(a.a.id,c),c.exec_eval=!1;else{if(void 0===c.exec_eval)try{c.exec_eval=b(c.eval,window)("true")}catch(k){c.exec_eval=!1}c.exec_eval?c.exec_fn(a.a.src,c):c.exec_csp(a.a.src,c)}})}catch(d){}},next:function(a,m,k,A,c,h,b,x,C,n,d,N,I,e,ja){var F="";x&&(F+="var V = true;\n");n&&(F+="var EV = true;\n");C&&(F+="var ENV = true;\n");n="";if(I||"complete"==document.readyState)n+="Context.pageLoaded |= true;\nContext.domContentLoaded |= true;\n";
else if(e||"interactive"==document.readyState)n+="Context.domContentLoaded |= true;\n";return['var backup = this;\n(function TM_back() {var Context = backup.Context;\nvar copy = function(src) {"use strict";var props = Context.O_gOPN(src);for (var kk, ii=0; (kk=props[ii]) !== undefined; ii++) {Context[kk] = src[kk];};};copy(backup);with (Context) {(function() {"use strict";copy({Context: Context,V:',x?"true":"false",",ENV:",C?"true":"false",",TS:",d?"true":"false",",D:",N?"true":"false",",use:",h,
",windowProps:",A,",scripts:",m,",powers:",k,",_content: false,flags:",c,',write_listeners: []});var cleanup = function(evt) {Message.cleanup();safeWindow.removeEventListener("unload", cleanup, false);};safeWindow.addEventListener("unload", cleanup, false);Context.write_listeners.push(function(d) {Context.createSafeDocument(d);Message.init();});',F+("var logLevel = "+b+";\n")+('var contextId = "'+a+'";\n')+"var Event = function() {};var Window = function() {};Window.prototype = {};"+n+"("+ja+")(Context, contextId);\n",
"})();};})()"].join("")},environment:function(a,m){var k=a.V,A=a.EV,c=a.D,h=a.Message,b=a.safeWindow,x=a.safeDocument,C=a.flags,n=a.F_a,d=a.F_c,N=a.F_b,I=a.F_tS,e=a.A_fE,ja=a.A_sl,F=a.A_sp,y=a.A_pu,oa=a.A_po,pa=a.A_sh,M=a.A_j,O=a.A_f,K=a.A_iO,ba=a.A_c,p=a.O_k,X=a.O_dP,Ca=a.O_gOPN,ka=a.O_gOPD,Da=a.O_gOPDs,Y=a.O_dG,qa=a.O_dS,Ea=a.O_tS,ra=a.J_p,la=a.J_s,v=a.c_l,Fa=a.c_i,P=a.c_w,ca=a.c_e,u=a.c_d,Ga=a.M_f,sa=a.M_r,ta=a.M_m,Ha=a.P_r,Ia=a.P_t,Ja=a.P_c,Z=a.S_fCC,ga=a.S_m,ua=a.S_su,va=a.S_sp,S=a.S_r,da=a.S_se,
wa=a.S_cCA,xa=a.S_tLC,Ka=a.S_tUC,La=a.R_rAAB,ya=a.D_pFS,Ma=a.X_o,Na=a.X_sRH,Oa=a.X_oMT,Pa=a.X_gARH,Qa=a.X_gRH,Ra=a.X_s,Sa=a.X_a,Ta=a.N_tS,ha=a.D_n;a.domContentLoaded|=0;a.pageLoaded|=0;a.domNodeInserted|=0;a.props={};var T=function(){var d=[],za=function(a){if(document.body)a&&(a(),a=null);else{var b=["load","DOMNodeInserted","DOMContentLoaded"],c=function(){e(b,function(a){x.removeEventListener(a,c,!1)});za(a)};e(b,function(a){x.addEventListener(a,c,!1)})}},ea=function(c){y(d,function(){b.setTimeout(c,
1)});a.domContentLoaded&&f.runListeners()},f={runListeners:function(){for(var a;a=pa(d);)a()},run:function(b){var e=function(){Ua.create(b)};"document-start"==b.script.options.run_at?(c&&u('env: run "'+b.script.name+'" ASAP -> document-start'),e()):"document-body"==b.script.options.run_at?(c&&u('env: schedule "'+b.script.name+'" for document-body'),za(e)):"context-menu"==b.script.options.run_at?(c&&u('env: run "'+b.script.name+'" ASAP -> context-menu'),e()):"document-end"==b.script.options.run_at?
(c&&u('env: schedule "'+b.script.name+'" for document-end'),y(d,e),a.domContentLoaded&&f.runListeners()):(c&&u('env: schedule "'+b.script.name+'" for document-idle'),ea(e))}};return f}();(k||c)&&u("env: initialized (content, id:"+ua(m,0,10)+"..., "+b.location.origin+b.location.pathname+") ");var U={createUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*sa()|0;return Ta("x"==a?b:b&3|8,16)})},toType:function(a){return ga(Ea(a,{}),new b.RegExp("\\s([a-z|A-Z]+)"))[1]}},
L={UTF8:{encode:function(a){return b.unescape(b.encodeURIComponent(a))},decode:function(a){return b.decodeURIComponent(b.escape(a))}},Base64:{encode:function(a){for(var c="",d=0;d<a.length;d++)c+=Z(wa(a,d)&255);return b.btoa(c)},decode:function(a){return b.atob(a)}},str2arrbuf:function(a){for(var c=new b.Uint8Array(a.length),d=0;d<a.length;d++)c[d]=wa(a,d);return c.buffer},arrbuf2str:function(a){var c="";a=new b.Uint8Array(a);for(var d=0;d<a.length;d+=32687)c+=n(Z,null,a.subarray(d,d+32687));return c}},
R=function(){var a={},b,d=function(b){var c=[],d=[],f=function(){k=d=c=null;delete a[b]},k={postMessage:function(a){h.send("port.message",{response_id:b,value:a})},onMessage:{addListener:function(a){y(c,a)}},onDisconnect:{addListener:function(a){y(d,a)}},disconnect:function(){h.send("port.message",{response_id:b,disconnect:!0});f()}};a[b]={message:function(a){c&&e(c,function(b){b(a)})},disconnect:function(a){d&&e(d,function(b){b(a)});f()}};return k};return{message:function(e){var f;e.connect?b&&b(e.destination,
d(e.response_id)):(f=a[e.response_id])?e.disconnect?f.disconnect():f.message(e.value):c&&P("ports: unkown id",e.response_id,e)},connect:function(a){var b=U.createUUID();h.send("port.message",{response_id:b,connect:!0,destination:a});return d(b)},onConnect:{addListener:function(a){b=a}}}}(),na=function(){var a={objs:{},push:function(b,c){0!==c&&1!==c&&(c=0);var d=Ga(19831206*sa()+1);a.objs[d]={fn:b,prio:c};return d},remove:function(b){delete a.objs[b]},get:function(b){for(var c=[],d=0;1>=d;d++)e(p(a.objs),
function(e){a.objs[e].prio!==d||void 0!==b&&e!=b||y(c,a.objs[e].fn)});return void 0===b?c:c[0]},finalize:function(b){if(void 0===b){b=a.get();for(var c=0;c<b.length;c++)b[c]()}else return a.objs[b]&&(c=a.objs[b].fn(),delete a.objs[b]),c}};return a}(),f=C.statistics?function(a,c){b.setTimeout(function(){h.send("api",{name:a,type:c},null)},1)}:function(){},W=function(){var a=function(){var a=0,c={},d={register:function(e,h,p){f("GM_registerMenuCommand");var n=R.connect("registerMenuCommand");n.onMessage.addListener(function(a){"run"===
a&&b.setTimeout(h,1)});n.onDisconnect.addListener(function(){d.unregister(y)});n.postMessage({method:"register",name:e,accessKey:p});k&&v("env: registerMenuCommand "+I(h));var y=++a;c[y]=n.disconnect;return y},unregister:function(a){f("GM_unregisterMenuCommand");k&&v("env: unregisterMenuCommand "+a);var b;if(b=c[a])b(),delete c[a]}};return d}(),d=function(a,b){f("GM_openInTab");var d=null,e=!1,k=null,h,n=function(){var a=[];return{run:function(b){b&&y(a,b);if(d)for(;a.length;)oa(a)()}}}(),p=R.connect("openInTab");
p.onMessage.addListener(function(a){a.tabId?e?v():(d=a.tabId,n.run()):a.name?h=a.name:a.close&&(e=!0,k&&(k(),k=void 0))});p.onDisconnect.addListener(function(){p=null});p.postMessage({method:"openTab",url:a,options:b});var v=function(){p&&p.postMessage({method:"closeTab"})},w={};X(w,{close:{value:function(){f("GM_openInTab.close");e?c&&u("env: attempt to close already closed tab!"):(e=!0,v())}},closed:{get:function(){f("GM_openInTab.closed");return e}},onclose:{get:function(){return k},set:function(a){f("GM_openInTab.onclose=");
k=a}},name:{get:function(){return h},set:function(a){n.run(function(){f("GM_openInTab.name=");p&&p.postMessage({method:"nameTab",name:a})})}}});return w},ea=function(a,c){f("GM_download");var d="Object"===U.toType(a)?a:{url:a,name:c},e=function(a,c){c=c||{};a&&b.setTimeout(function(){n(a,c,[c])},1)},k=R.connect("download");k.onMessage.addListener(function(a){try{a.load?d.onload&&e(d.onload,a.data):a.progress?d.onprogress&&e(d.onprogress,a.data):a.timeout?d.ontimeout&&e(d.ontimeout,a.data):d.onerror&&
e(d.onerror,a.data)}catch(b){v("env: Error: TM_download - ",b,d)}});k.onDisconnect.addListener(function(){k=null});k.postMessage({details:d});return{abort:function(){k&&k.disconnect();k=null}}},Q={};return{log:function(){f("GM_log");n(v,this,arguments)},addStyle:function(a,b){f("GM_addStyle");var c=U.createUUID();h.send("addStyle",{css:a,id:c},b?function(){b()}:null);return x.getElementById(c)},closeTab:function(a){f("window.close");h.send("closeTab",null,a?function(){a()}:null)},focusTab:function(a){f("window.focus");
h.send("focusTab",null,a?function(){a()}:null)},setClipboard:function(a,b,c){f("GM_setClipboard");h.send("setClipboard",{content:a,info:b,id:m},c?function(){c()}:null)},syntaxCheck:function(a,b){h.send("syntaxCheck",{code:a},function(a){b(a)})},of:function(u){var D=u.script,G=function(){var a=[],d=u.storage,V=0,w=function(a,B){if("string"===typeof a){var c=a[0];a=ua(a,1);switch(c){case "b":return"true"===a;case "n":return b.Number(a);case "x":return L.UTF8.decode(L.Base64.decode(a));case "o":try{return ra(a)}catch(d){v("values: parseValueFromStorage: "+
d)}return B;default:return a}}else return B},r=function(b,d,Aa,z){d!=Aa&&e(a,function(a){if(a&&a.key==b&&a.cb)try{a.cb(b,w(d),w(Aa),z)}catch(B){c&&P('values: change listener of "'+b+'" failed with: '+B.message)}})},z=function(a){q.postMessage({method:"saveStorageKey",uuid:D.uuid,key:a,value:d.data[a],id:m,ts:d.ts})},q=R.connect("values");q.onMessage.addListener(function(a){a.storage&&e(p(a.storage.data),function(b){var B=d.data[b];d.data[b]=a.storage.data[b];var c=d.data[b];k&&v("values: message - config key "+
b+": "+B+" -> "+c);r(b,B,c,!0)});a.removed&&(d[a.removed]=void 0)});q.onDisconnect.addListener(function(){c&&v("values: port disconnected")});q.postMessage({method:"addStorageListener",uuid:D.uuid,id:m});return{set:function(a,b){f("GM_setValue");var B=d.data[a];d.ts=ha();var c=d.data,e;a:{e=b;var V=(typeof e)[0];switch(V){case "o":try{e=V+la(e)}catch(w){v(w);e=void 0;break a}break;case "s":var q=Z(8232),ia=Z(8233);if(-1!==da(e,q)||-1!==da(e,ia))V="x",e=L.Base64.encode(L.UTF8.encode(e));e=V+e;break;
default:e=V+e}}c[a]=e;z(a);r(a,B,d.data[a],!1)},get:function(a,b){f("GM_getValue");return w(d.data[a],b)},remove:function(a){f("GM_deleteValue");var b=d.data[a];d.ts=ha();delete d.data[a];z(a);r(a,b,d.data[a],!1)},list:function(){f("GM_listValues");return p(d.data)},registerChangeListener:function(b,c){f("GM_addValueChangeListener");var d=++V;y(a,{id:d,key:b,cb:c});return d},unregisterChangeListener:function(b){f("GM_removeValueChangeListener");a=O(a,function(a){return a.id!==b?!0:!1})}}}(),x=function(){return{getText:function(a){f("GM_getResourceText");
for(var b=0;b<D.resources.length;b++){var c=D.resources[b];if(c.name==a&&!c.failed){try{if(null!==c.content)return L.UTF8.decode(c.content)}catch(d){}return""}}return null},getURL:function(a){f("GM_getResourceURL");for(var b=0;b<D.resources.length;b++){var c=D.resources[b];if(c.name==a&&!c.failed){if(null===c.content)return"";try{return"data:"+(c.meta||"application")+";base64,"+L.Base64.encode(c.content)}catch(d){}return c.url}}return null}}}(),A=function(){return{set:function(a,b){f("GM_setTab");
h.send("tabsSet",{uuid:D.uuid,tab:a},b?function(){b()}:null)},get:function(a){f("GM_getTab");h.send("tabsGet",{uuid:D.uuid},a?function(b){a(b||{})}:null)},getAll:function(a){f("GM_getTabs");h.send("tabsGetAll",{uuid:D.uuid},a?function(b){a(b||{})}:null)}}}(),F=function(a){f("GM_xmlhttpRequest");var c=!1,d=a.context;delete a.context;var w=function(){var a={};e(p(b.XMLHttpRequest.__proto__),function(b){a[b]=!0});var c=function(){};e(p(b.XMLHttpRequest),function(d){a[d]||(c[d]=b.XMLHttpRequest[d])});
return c}(),r=function(){c=!0},z=function(a,d){d=d||{};a&&!c&&b.setTimeout(function(){d.__proto__=w;n(a,d,[d])},1)};"object"===typeof a.url&&a.url.href&&(a.url=a.url.href);var q=function(a,c){var d=new b.FileReader;d.onload=function(){c(L.arrbuf2str(d.result))};La(d,a)},l=function(a,c){var d,e,g,B=U.toType(a);if("Blob"===B||"File"===B)q(a,function(b){c({type:B,value:b,meta:a.type,name:a.name,lastModified:a.lastModified})});else if("FormData"===B)if(e=a.keys&&a.getAll?a.keys():null){var z,E={};for(d=
[];!(z=e.next()).done;)y(d,z.value);g=function(){if(d.length){var b=oa(d),e=a.getAll(b);-1===da(b,/\[\]$/)&&(e=e[0]);l(e,function(a){E[b]=a;g()})}else c({type:"FormData",value:E})};g()}else c({error:B});else if(!(B=U.toType(a))||"Array"!==B&&"Object"!==B)c({value:a});else{var H,t,r=0;e=0;"Object"===B?(d=p(a),t=function(a){return a<d.length?d[a]:null},H={}):(t=function(b){return b<a.length?b:null},H=[]);g=function(){var d=t(r);null===d?c({type:B,value:H}):l(a[d],function(a){a.error?c(a):(H[d]=a,r++,
1024>e++?g():(e=0,b.setTimeout(g,1)))})};g()}},g=!0;(function(b){if(a.url){var c=a.url.substr(0,5);if(-1!=["data:","blob:"].indexOf(c))return g=!1,b()}if(!a.data)return b();l(a.data,function(c){c.error?(g=!1,P("GM_xmlhttpRequest:","unable to handle data type "+c.error+". Going to use default xhr as fallback.")):(a.binary&&(c.type="Blob"),a.data=c,a.data_type="typified");b()})})(function(){if(!c)if(g){var w=R.connect("xhr"),q=[];a.headers&&e(p(a.headers),function(b){"cookie"===xa(b)&&(a.cookie=a.headers[b],
delete a.headers[b])});w.postMessage({method:"xhr",details:a,callbacks:{onloadstart:!!a.onloadstart,onload:!!a.onload,onreadystatechange:!!a.onreadystatechange,onerror:!0,ontimeout:!!a.ontimeout,onprogress:!!a.onprogress,onpartial:!0},id:m,url:b.location.href,uuid:D.uuid});w.onMessage.addListener(function(c){c.data&&d&&(c.data.context=d);if(c.data&&c.onload){q.length&&(c.data.response_data=M(q,""),q=null);if(c.data.response_data){var g=c.data.response_data;e(["response_data"],function(a){delete c.data[a]});
var w={response:function(c){f("GM_xmlhttpRequest.response["+(a.responseType||"unknown")+"]");var d=a.responseType?xa(a.responseType):"";if("arraybuffer"==d)c=L.str2arrbuf(c);else if("blob"==d)c=new b.Blob([L.str2arrbuf(c)]);else if("json"==d)c=ra(c);else if("document"==d)return d=new b.DOMParser,ya(d,c,"text/html");return c},responseText:function(a){f("GM_xmlhttpRequest.responseText");return a},responseXML:function(a){f("GM_xmlhttpRequest.responseXML");var c=new b.DOMParser;return ya(c,a,"text/xml")}};
e(p(w),function(a){Y(c.data,a,function(){try{return w[a](g)}catch(b){P("GM_xmlhttpRequest:",b)}})})}z(a.onreadystatechange,c.data);z(a.onload,c.data)}else if(c.onreadystatechange)4!=c.data.readyState&&z(a.onreadystatechange,c.data);else if(c.onpartial)y(q,c.data.partial);else if(c.onerror)c.exception&&ca(c.exception),z(a.onerror,c.data);else{var r=O(["onloadstart","onprogress","ontimeout"],function(a){return!!c[a]})[0]||"onerror";z(a[r],c.data)}});k&&w.onDisconnect.addListener(function(){v("env: GM_xmlhttpRequest.onDisconnect! :)")});
r=function(){f("GM_xmlhttpRequest.abort");w&&w.disconnect();w=null;c=!0}}else{var l=new b.XMLHttpRequest;void 0===a.async&&(a.async=!0);Ma(l,a.method,a.url,a.async,a.user,a.password);a.headers&&e(p(a.headers),function(b){Na(l,b,a.headers[b])});a.overrideMimeType&&Oa(l,a.overrideMimeType);a.responseType&&(l.responseType=a.responseType);e("abort error load loadstart progress readystatechange timeout".split(" "),function(b){l["on"+b]=function(){var c="",e=a.url;if(2<l.readyState&&(c=Pa(l),4==l.readyState)){c&&
(c=S(c,/TM-finalURL[0-9a-zA-Z]*\: .*[\r\n]{1,2}/,""));var g;try{g=Qa(l,"TM-finalURL"+C.short_id)}catch(E){}g&&(e=g)}c={readyState:l.readyState,status:"",statusText:"",responseHeaders:c,finalUrl:e,context:d};4==l.readyState&&(l.responseType?c.response=l.response:(c.responseText=l.responseText,c.responseXML=l.responseXML),c.status=l.status,c.statusText=l.statusText);z(a["on"+b],c)}});Ra(l,a.data);r=function(){f("GM_xmlhttpRequest.abort");Sa(l);c=!0}}});return{abort:function(){r()}}},N=function(a){var b=
{};e(p(a),function(c){b[c]=a[c]});b.id=m;f("GM_notification");b.text||b.highlight?h.send("notification",b,function(a){if(b.onclick&&a.clicked)b.onclick();if(b.ondone)b.ondone(!0===a.clicked)}):P("GM.notification: neither a message text nor hightlight options were given!")},I,K,w=function(a,b){f("GM_webRequest");var c=function(){K==d&&(K=null);d=null};K&&K.disconnect();var d=K=R.connect("webRequest");b&&d.onMessage.addListener(function(a){b(a.type,a.message||"ok",a.details)});d.onDisconnect.addListener(c);
d.postMessage({rules:a,uuid:D.uuid});return{abort:function(){f("GM_webRequest.abort");d&&d.disconnect();c()}}};Q[u.script.uuid]=Q[u.script.uuid]||{getInfo:function(){if(I)return I;var a=u.script,b={observers:1,id:1,enabled:1,hash:1,fileURL:1},c={script:{}};e(p(a),function(d){b[d]||(c.script[d]=a[d])});var d=a.options.updateURL||a.options.fileURL;c.script["run-at"]=a.options.override.run_at||a.options.run_at;c.script.excludes=a.options.override.orig_excludes;c.script.includes=a.options.override.orig_includes;
c.script.matches=a.options.override.orig_matches;c.script.grant=a.grant;c.script.unwrap=!1;c.scriptMetaStr=u.header;c.scriptSource=u.code;c.scriptWillUpdate=!!d;c.scriptUpdateURL=d;c.version=C.version;c.scriptHandler="Tampermonkey";c.isIncognito=C.inIncognitoContext;c.downloadMode=C.downloadMode;return I=c},registerMenuCommand:a.register,unregisterMenuCommand:a.unregister,download:ea,webRequest:w,openInTab:d,setValue:G.set,getValue:G.get,deleteValue:G.remove,listValues:G.list,addValueChangeListener:G.registerChangeListener,
removeValueChangeListener:G.unregisterChangeListener,getResourceText:x.getText,getResourceURL:x.getURL,notification:N,xmlhttpRequest:F,setTab:A.set,getTab:A.get,getTabs:A.getAll};return Q[u.script.uuid]}}}(),Ua=function(){var m=function(a,b,c){var d=Da(b);e(p(d),function(c){var e=d[c];e&&e.get&&!C.sandbox_allow_getters||("function"===typeof b[c]?a[c]=N(b[c],b):function(){Y(a,c,function(){return b[c]})}())});e(p(c),function(b){a[b]=c[b]});return a},x=function(a,c,d,k){var f={attrChange:0,attrName:null,
bubbles:!0,cancelBubble:!1,cancelable:!1,clipboardData:void 0,currentTarget:null,defaultPrevented:!1,eventPhase:0,newValue:null,prevValue:null,relatedNode:null,returnValue:!0,srcElement:null,target:null,timeStamp:ha()};d="string"===typeof d?new b.Function(d):d;var r=new Event;e(p(f),function(a){r[a]=f[a]});e(p(c),function(a){r[a]=c[a]});r.type=a;n(d,k,[r])},ea=function(a,b,c,d){void 0===d&&(d=function(a,b){return b});e(ba(["GM_info","GM.info"],b),function(b){var e,z=c[b];z&&(e=d(b,z))&&(a[b]=e)})},
Q=function(a,b){void 0===b&&(b=100);return b&&a&&(a==document||Q(a.parentNode,b-1))},L=function(){var b=null;return function(c){b||(b={instance:c,is_open:!1},e(["write","writeln","open","close"],function(d){b[d]=c[d];c[d]=function(){var f=!1;-1!=K(["write","writeln","open"],d)?b.is_open?f=!0:b.is_open=!0:"close"===d&&(b.is_open=!1);!f&&b.is_open&&h.send("document.write");var k=document.documentElement,r=n(b[d],c,arguments);if(!f&&b.is_open)return k!==document.documentElement&&(b.instance!==c&&(b=
null,L(document)),e(a.write_listeners,function(a){a(document)})),r}}))}}(),D={},G=[],O=function(e,f,p){if(!e.__addEventListener){X(e,{__addEventListener:{value:e.addEventListener,enumerable:!1,configurable:!1},__removeEventListener:{value:e.removeEventListener,enumerable:!1,configurable:!1}});var h=[],n=function(a){for(var b=0;b<h.length;b++)if(h[b].fn===a)return b};e.removeEventListener=function(a,b,c){c=!!c;var d,e;if(void 0!==(d=n(b))&&(e=h[d].listeners)){if(b=e[a+"-"+c])this.__removeEventListener(a,
b,c),delete e[a+"-"+c];Ca(e).length||F(h,d,1)}else this.__removeEventListener(a,b,c)};var r=function(a,c,d,e){if(c){var f=G.length;c=b.parseInt(M(["DOMContentLoaded"==d?1:2,e?1:2,e?c:3-c,ha()],"0"));for(d=0;d<G.length;d++)if(e=G[d],!e||!e.prio||e.prio>c){f=d;break}F(G,f,0,{prio:c,fn:a})}else y(G,{fn:a})};e.addEventListener=function(e,q,l){(k||A)&&v("env: addEventListener "+e);if(1==f&&"load"==e||"DOMContentLoaded"==e||"DOMNodeInserted"==e){l=!!l;var g,w=!0,u=this;try{try{throw new b.Error;}catch(H){var m=
/tms_[0-9a-f_]+/,aa=H.stack||H.stacktrace;if(aa)for(var J=va(aa,"\n"),ia,aa=0;aa<J.length&&(!(ia=ga(J[aa],m))||!(g=D[ia[0]]));aa++);else{var Ba=function(a,d){void 0===d&&(d=10);if(0===d)return null;if(a.caller){var e,E;try{return E=I(a.caller),ga(E,new b.RegExp("^function[^(]+"))&&(void 0).length&&(e=ga((void 0)[0],m))?e[0]:Ba(a.caller,d-1)}catch(g){c&&P("env: unable to detect caller context",g)}}return null},E;if(E=Ba(arguments.callee))g=D[E]}}}catch(H){c&&ca("env: Error: event "+e,H)}g&&"document-idle"!==
g.run_at&&(g=null,"load"==e?a.pageLoaded&&(g=function(){var a=u.document||u;(k||A)&&v("env: postLoadEvent!");a=a||document;x("load",{attrName:"null",newValue:"null",prevValue:"null",eventPhase:b.Event.AT_TARGET,attrChange:b.MutationEvent.ADDITION,target:a,relatedNode:a,srcElement:a},q,u)},w=!1,r(g,f,e,l)):"DOMContentLoaded"==e&&a.domContentLoaded&&(g=function(){var a=u.document||u;(k||A)&&v("env: postDomEventListener!");a=a||document;x("DOMContentLoaded",{attrName:"null",newValue:"null",prevValue:"null",
eventPhase:b.Event.AT_TARGET,attrChange:b.MutationEvent.ADDITION,target:a,relatedNode:a,srcElement:a},q,u)},w=!1,r(g,f,e,l)),g&&(b.setTimeout(function(){if(G.length){var a=pa(G);a&&a.fn&&a.fn()}},1),w=!1));w&&(g=function(a){return fa(d,[q,this,p(a)],0,!0,u)},void 0===(w=n(q))&&(w=h.length,y(h,{fn:q,listeners:{}})),h[w].listeners[e+"-"+l]=g,this.__addEventListener(e,g,l))}else this.__addEventListener(e,q,l)};y(na,function(){e.removeEventListener=e.__removeEventListener;e.addEventListener=e.__addEventListener})}},
R=function(a){a.__evaluate||(X(a,{__evaluate:{value:a.evaluate,enumerable:!1,configurable:!1}}),a.evaluate=function(a,b,c,d,e){k&&v("env: document.evaluate "+a);b||(b=this);var f;if("undefined"!=typeof XPathResult){var q=a,l=null;try{f=this.__evaluate(q,b,c,d,e)}catch(h){l=h}var g=!1;try{g|=!!f.snapshotLength}catch(h){}try{g|=!!f.singleNodeValue}catch(h){}if(g||"."==a[0]||Q(b))k&&v("env: queried document for "+q);else{k&&v("env: query added elem for "+q);q=("/"==a[0]?".":"./")+a;try{f=this.__evaluate(q,
b,c,d,e)}catch(h){}}k&&v("env: query returned ",f,l);if(!g&&l)throw l;}else k&&v("env: XPathResult == undefined, but selectNodes via ",a),f=b.selectNodes(a);return f},y(na,function(){a.evaluate=a.__evaluate}))},fa=function(a,c,d,e,f){var r=c[d],k=typeof r;e&&"string"===k?c[d]=new b.Function(r):f&&"function"===k&&(c[d]=function(){return n(r,f,arguments)});return n(a,window,c)},Z=function(c,d){var f=["eval"],h={};e(p(c),function(a){c[a].context_prop&&(h[(a.split(".")||[])[1]]=!0)});var v=function(a,
c,d,l){var g=function(b){return b===c?a:b},w=function(a,b,c,d){c||(c=a);var e=function(){var e=n(a[b],c,arguments);d&&(e=d(e));return e};e.__proto__=a[b];e.prototype=a[b].prototype;return e},B=function(c){var d,e=null,g=c.replace(/^on/,""),f,e=function(c){(d=c)&&!f?(f=function(){if("function"===typeof d)return n(d,a,arguments)},b.addEventListener(g,f,!0)):!d&&f&&(b.removeEventListener(g,f,!0),f=null)};Y(a,c,function(){return d});qa(a,c,e)},v=function(b,d){var e,f=null,t=null,f="function"===typeof d.get?
d.get:function(){d.opts&&d.opts.get_cb&&n(d.opts.get_cb,this,[arguments,v]);return void 0===e?g(c[b]):e};"function"===typeof d.set?t=d.set:d.get||(t=function(a){e=a});f&&Y(a,b,f);t&&qa(a,b,t)};e(p(l),function(a){d[a]=d[a]||!1!==l[a]});var y=C.sandbox_allow_getters,J=C.detect_constructors_by_keys;e(p(d),function(b){if(!1!==l[b]){var e,E,H,t={};try{var n=ka(c,b);try{if(!(e=l[b])||e.needs_grant&&!0!==h[b])if(d[b].event)t.event=!0;else if(n&&n.get)if(y)t.get=!0;else{k&&u("sandbox: ignore getter",b,n);
return}else"function"===(H=typeof(E=c[b]))?d[b].proto?t.wrap=!0:(ka(E,"prototype")||J&&p(E).length)&&!n.enumerable||-1!=K(f,b)||!E.bind?t.direct=!0:t.bind=!0:"number"===H||"string"===H?t.get=!0:t.direct=!0;else if(e.wrap)t.wrap=!0,t.that=e.that;else if(e.direct)t.direct=!0;else if(e.enhance)t.enhance=e.enhance;else if(e.get||e.set)t.get=e.get,t.set=e.set,t.opts=e.opts}catch(m){t.get=!0}t.enhance?(k&&u("sandbox: original["+b+"] -> enhanced reference"),a[b]=t.enhance):n&&n.get&&!y?k&&u("sandbox: ignore getter",
b,n):t.event?(k&&u("sandbox: original["+b+"] -> event reference"),B(b)):t.get||t.set?(k&&u("sandbox: original["+b+"] -> "+("function"===typeof t.get||"function"===typeof t.set?"enhanced ":"")+"getter/setter reference"),v(b,t)):t.wrap?(k&&u("sandbox: original["+b+"] -> wrapped reference "),a[b]=w(c,b,t.that,g)):t.direct?(k&&u("sandbox: original["+b+"] -> direct reference"),a[b]=g(c[b])):t.bind&&(k&&u("sandbox: original["+b+"] -> bound reference"),a[b]=N(c[b],c))}catch(m){P("env: error while creating a new sandbox: "+
m.message)}}});return a};return function(){var c=new Window,f={setTimeout:{enhance:function(){return fa(b.setTimeout,arguments,0,!0,c)}},setInterval:{enhance:function(){return fa(b.setInterval,arguments,0,!0,c)}},close:{needs_grant:!0,get:function(){return b.self==b.top?function(a){return W.closeTab(a)}:b.close}},focus:{needs_grant:!0,get:function(){return function(a){return W.focusTab(a)}}},location:{get:!0,set:function(a){b.location.href=a}},document:{get:function(){var a=b.document;d(a);return a}},
clearInterval:{get:function(){return b.clearInterval}},clearTimeout:{get:function(){return b.clearTimeout}},addEventListener:{enhance:function(){return fa(b.addEventListener,arguments,1,!0)}},removeEventListener:{enhance:function(){return fa(b.removeEventListener,arguments,1,!0)}}};(function(){var a=ta(b.frames.length,7);f.length={get:!0,opts:{get_cb:function(c,d){for(var e=b.frames.length,f=a;f<e;f++)d(b.String(f),{get:!0});a=ta(e,a)}}};for(var c=0;c<a;c++)f[b.String(c)]={get:!0}})();e(p(b),function(a){b[a]!=
window&&(f[a]=f[a]||{enhance:b[a]})});var k=v(c,window,a.windowProps,f),l={context:k,filter:function(a){return a==window?k:a},filterEvent:function(a){var b={},c;for(c in a)if("function"===typeof a[c])b[c]=function(){var b=c;return function(){return n(a[b],a,arguments)}}();else{var d=l.filter(a[c]);b[c]=d}return b}};return l}()},T=function(){return m({},b.console,{debug:u,log:v,info:Fa,warn:P,error:ca})},da=function(d,f,k,h,u,r){var v=null,q=function(){return"[Tampermonkey property]"};try{var l=h.sandboxes[d.uuid],
g=["context","fapply"],m=[void 0,void 0],x=h.elements[d.uuid];e(p(x),function(a){var b=x[a];b.overwrite?(y(g,a),y(m,b.value)):b.context_prop||(y(g,a),y(m,"context."+a),b.getter?Y(l,a,b.getter):l[a]=b.value);b.protect&&l[a]&&(l[a].toString=q)});var A,v=M(["(function(context, fapply, console) {","with (context) {","(function(module) {",'"use strict";',"try {\n",C.measure_scripts?'console.time("'+(A="SCRIPT RUN TIME["+d.name.replace(/\W+/g," ")+"]")+'");\n':"","fapply(module, context, [",M(m,","),"]);",
C.measure_scripts?'console.timeEnd("'+A+'");\n':"","} catch (e) {","if (e.message && e.stack) {","console.error(\"ERROR: Execution of script '",S(d.name,new b.RegExp("[\"']","g"),"\\$1"),"' failed! \" + e.message);",'console.log(e.stack.replace(/(\\\\(eval at )?<anonymous>[: ]?)|([\\s.]*at Object.tms_[\\s\\S.]*)/g, ""));',"} else {","console.error(e);","}","}\n","})","(function ",r,"(",M(g,","),") {",C.enforce_strict_mode?'"use strict";\n':"",k,f,"\n","})","}","})(this.context, this.fapply, this.console)"],
""),D={context:l,fapply:n,console:T()};u?u(v,D):a.E_c(v,D)}catch(J){W.syntaxCheck(M([k,f],""),function(a){var g="";if(a.errors){var E=va(k,"\n").length-1,H="";a.errors&&e(p(a.errors),function(b){if((b=a.errors[b])&&0<=b.line&&b.reason){var c=b.line;H+=M([c>E?"script:":"require:"," (",b.code,") ",S(b.reason,/.$/,"")," on line: ",c>E?c-E:c," at character: ",b.character,"\n"],"")}});g="JSHINT output:\n"+H}else g=f;var t=J.stack?S(J.stack,/(\\(eval at )?<anonymous>[: ]?)|([\s.]*at Object.tms_[\s\S.]*)/g,
""):"";c||a.errors?ca('Syntax error @ "'+d.name+'"!\n##########################\n'+g+"##########################\n\n"+t):ca('Syntax error @ "'+d.name+'"!\n\n',t);b.setTimeout(function(){throw J;},1)})}};return{create:function(d){var h=d.script,m={},x=-1!==K(h.grant,"none")?function(b,c){a.E_u(b,c)}:null,A=h.namespace+"_"+!!x;void 0===a.props[A]&&(a.props[A]={sandboxes:{},elements:{}},y(na,function(){a.props[A]=null}));m.CDATA={value:function(a){f("CDATA");this.src=a;this.toXMLString=this.toString=
function(){return this.src}}};m.uneval={value:function(a){f("window.uneval");try{return"\\$1 = "+la(a)+";"}catch(b){v(b)}}};m.define={value:void 0};m.module={value:void 0};m.exports={value:void 0};var r={},z={},q={},l={},g=W.of(d);f(h.options.run_at||"<default>","run_at");if(x)f("none","grant");else{f("sandbox","grant");m.window={value:"context",overwrite:!0};var C={window:window};e(p(C),function(a){var b="unsafe"+S(a,/^(.)/g,function(a){return Ka(a)});m[b]={value:C[a]};-1!=K(h.grant,b)&&f(b,"grant")});
m.console={value:T()};m.cloneInto={value:function(a){f("compat.cloneInto");return a}};m.exportFunction={value:function(a,b,c){f("compat.exportFunction");c&&void 0!==c.defineAs&&(b[c.defineAs]=a);return a}};m.createObjectIn={value:function(a,b){f("compat.createObjectIn");var c={};b&&void 0!==b.defineAs&&(a[b.defineAs]=c);return c}};r.addStyle=W.addStyle;z.deleteValue=g.deleteValue;z.listValues=g.listValues;z.getValue=g.getValue;z.setValue=g.setValue;r.log=W.log;r.registerMenuCommand=g.registerMenuCommand;
r.unregisterMenuCommand=g.unregisterMenuCommand;r.openInTab=g.openInTab;r.addValueChangeListener=g.addValueChangeListener;r.removeValueChangeListener=g.removeValueChangeListener;l.xmlhttpRequest=g.xmlhttpRequest;l.download=g.download;r.webRequest=g.webRequest;l.setClipboard=W.setClipboard;r.getTab=g.getTab;r.setTab=g.setTab;r.saveTab=g.setTab;r.getTabs=g.getTabs;z.getResourceText=g.getResourceText;z.getResourceURL=g.getResourceURL;var ma=function(a,b,c){var d=ka(a,b);d&&(d.get||d.set)||(a[b]=c)},
G=function(a,c){var d,f=new b.Promise(function(b,f){var g={},h=c.onload,k=c.ontimeout,l=c.onerror;e(p(c),function(a){g[a]=c[a]});g.onerror=function(a){f(a);l&&n(l,this,arguments)};g.ontimeout=function(a){f(a);k&&n(k,this,arguments)};g.onload=function(a){b(a);h&&n(h,this,arguments)};var m=a(g).abort;!0===d?m():d=m});ma(f,"abort",function(){d?d():d=!0});return f};e(p(l),function(a){q["GM_"+a]={value:l[a]}});q["GM.xmlhttpRequest"]={value:function(a){return G(l.xmlhttpRequest,a)}};q["GM.download"]={value:function(a){return G(l.download,
a)}};q["GM.setClipboard"]={value:function(a,c){return new b.Promise(function(b){l.setClipboard(a,c,b)})}};q.GM_notification={value:function(a,b,c,d){var f=null,k=["timeout","text","image","title","highlight"],l=null,m={};"object"===typeof a&&(l=a);l?(e(k,function(a){m[a]=l[a]}),f=l.ondone,d=l.onclick,"function"===typeof b&&(f=b)):(m.image=c,m.title=b,m.text=a);m.text&&(m.image=m.image||h.icon64||h.icon,m.title=m.title||h.name);m.onlick=d;m.ondone=f;g.notification(m)}};q["GM.notification"]={value:function(a){return"object"!==
typeof a?P("GM.notification(details): received no details"):new b.Promise(function(b,c){e(p(a),function(a){});g.notification(a)})}};e(p(z),function(a){var b=z[a];q["GM_"+a]={value:b};q["GM."+a]={getter:function(){return function(){var a=Ha(n(b,this,arguments));ma(a,"then",function(b){return Ia(a,b)});ma(a,"catch",function(b){return Ja(a,b)});return a}}}});e(p(r),function(a){q["GM_"+a]=q["GM."+a]={value:r[a]}});q["window.close"]={context_prop:!0};q["window.focus"]={context_prop:!0}}q.GM_info=q["GM.info"]=
{getter:g.getInfo};var Q={};m.GM={value:Q,protect:!0};ea(m,h.grant,q,function(a,b){if("GM."===a.substr(0,3))a=a.split(".")[1],Y(Q,a,b.getter?b.getter:function(){return b.value});else return b.protect=!0,b});h.options.compat_prototypes&&((k||c)&&v("env: option: add toSource"),b.Object.prototype.toSource||X(b.Object.prototype,{toSource:{value:function(){f("Object.toSource");var a=U.toType(this);if("String"===a)return'(String("'+S(this,new b.RegExp('"',"g"),'\\"')+'"))';if("Number"===a)return'(Number("'+
b.Number(this)+'"))';if("Array"===a){for(var a="(new Array(",c=0;c<this.length;c++){var d=U.toType(this[c]),a="Null"===d?a+"null":"Undefined"===d?a+"undefined":a+this[c].toSource();c+1<this.length&&(a+=",")}return a+"))"}return'JSON.parse(unescape("'+b.escape(la(this))+'"))'},enumerable:!1,writable:!0,configurable:!0}}),(k||c)&&v("env: option: add some array generics"),e("indexOf lastIndexOf filter forEach every map some slice".split(" "),function(a){if("function"!==typeof b.Array[a]){var c={};c[a]=
{value:function(c){f("Array."+a);return n(b.Array.prototype[a],c,n(ja.wrappedJSObject,arguments,[1]))},enumerable:!1,writable:!0,configurable:!0};X(b.Array,c)}}));var J,I="";if(x)J=new Window;else{var F=Z(m,function(a){R(a);L(a);O(a,2,F.filterEvent)});J={run_at:h.options.run_at,uuid:h.uuid};I="tms_"+S(h.uuid,/-/g,"_");D[I]=J;O(F.context,1,F.filterEvent);J=F.context}a.props[A].sandboxes[h.uuid]=J;a.props[A].elements[h.uuid]=m;(k||c)&&u("env: execute script "+h.name+" @ the "+(x?"un":"")+"safe context now!");
da(h,d.code,d.requires,a.props[A],x,I)}}}();(function(){if(C.external_connect){var a;if(a=window.external){var b=function(a,b){h.send("external.message",a,function(a){b&&b(a)})};try{X(a,{Tampermonkey:{get:function(){return{getVersion:function(a){b({method:"getVersion"},a)},isInstalled:function(a,c,d){"function"===typeof c&&(d=c,c=null);b({method:"isInstalled",script:{name:a,namespace:c}},d)}}},configurable:!0}})}catch(c){}}}})();h.onMessage.setListener(function(b){var d=b.a;"load"==b.m?(a.pageLoaded=
!0,T.runListeners()):"DOMContentLoaded"==b.m?(a.domContentLoaded=!0,T.runListeners()):"setForeignAttr"==b.m?window[d.attr]=d.value:"port.message"==b.m?R.message(d):"executeScript"==b.m?T.run(b.a):"cleanup"==b.m?h.cleanup():c&&v("env: unkown method",b)});c&&v("Tampermonkey started");e(a.scripts,function(a){T.run(a)})}}}());
